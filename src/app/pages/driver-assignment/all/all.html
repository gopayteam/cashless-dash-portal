<!-- pages/drivers/all.html -->
<p-toast position="top-right"></p-toast>

<div class="assignments-container">

  <!-- ═══════════════════════════════════════════
       HEADER
  ═══════════════════════════════════════════ -->
  <div class="assignments-header">
    <div class="header-content">
      <h1>
        <i class="pi pi-id-card"></i>
        Driver Assignments
      </h1>
      <p class="text-muted">Manage and track all driver-vehicle assignments</p>
    </div>

    <div class="header-controls">
      <div class="search-wrapper">
        <i class="pi pi-search search-icon"></i>
        <input type="text" class="search-input" placeholder="Search by name, phone, fleet..." [(ngModel)]="searchTerm"
          (input)="onSearchChange()" />
        <button *ngIf="searchTerm" class="clear-search-btn" (click)="clearSearch()">
          <i class="pi pi-times"></i>
        </button>
      </div>

      <p-select [options]="approvalStatusOptions" [(ngModel)]="selectedApprovalStatus"
        (onChange)="onApprovalStatusChange()" placeholder="All Status" styleClass="filter-dropdown">
      </p-select>

      <p-select [options]="approvalFilterOptions" [(ngModel)]="selectedApprovalFilter"
        (onChange)="onApprovalFilterChange()" placeholder="Approval" styleClass="filter-dropdown">
      </p-select>

      <button *ngIf="searchTerm || selectedApprovalStatus || selectedApprovalFilter" class="clear-all-btn"
        (click)="clearFilters()" pTooltip="Clear all filters">
        <i class="pi pi-filter-slash"></i>
        Clear
      </button>

      <button class="icon-btn" (click)="refresh()" [disabled]="loading" pTooltip="Refresh">
        <i class="pi pi-refresh" [class.spinning]="loading"></i>
      </button>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════
       SUMMARY STATS
  ═══════════════════════════════════════════ -->
  <div class="summary-stats">

    <div class="stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <i class="pi pi-users"></i>
      </div>
      <div class="stat-content">
        <span class="stat-label">Total Drivers</span>
        <span class="stat-value">{{ totalRecords }}</span>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
        <i class="pi pi-check-circle"></i>
      </div>
      <div class="stat-content">
        <span class="stat-label">Active</span>
        <span class="stat-value">{{ activeDrivers }}</span>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
        <i class="pi pi-clock"></i>
      </div>
      <div class="stat-content">
        <span class="stat-label">Pending</span>
        <span class="stat-value">{{ pendingApprovals }}</span>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);">
        <i class="pi pi-car"></i>
      </div>
      <div class="stat-content">
        <span class="stat-label">Fleets</span>
        <span class="stat-value">{{ totalFleets }}</span>
      </div>
    </div>

  </div>

  <!-- ═══════════════════════════════════════════
       TABLE CARD
  ═══════════════════════════════════════════ -->
  <div class="table-card">

    <div class="table-toolbar">
      <div class="toolbar-left">
        <span class="record-badge">
          {{ filteredAssignments.length }} of {{ totalRecords }} assignments
        </span>

        <p-paginator [first]="first" [rows]="rows" [totalRecords]="totalRecords"
          [rowsPerPageOptions]="[10, 20, 50, 100, 300, 500, 1000]" (onPageChange)="onPageChange($event)"
          [showCurrentPageReport]="true" style="margin-right: 0">
        </p-paginator>
      </div>

      <!-- ─── Pagination Controls (Top) ────────────────────────────────────────── -->
    </div>

    <!-- Loading -->
    <!-- <div *ngIf="loading" class="loading-overlay">
      <p-progressSpinner strokeWidth="4" styleClass="custom-spinner"></p-progressSpinner>
      <p>Loading assignments…</p>
    </div> -->

    <!-- Empty -->
    <div *ngIf="!loading && filteredAssignments.length === 0" class="empty-state">
      <i class="pi pi-users"></i>
      <h3>No Driver Assignments Found</h3>
      <p *ngIf="searchTerm || selectedApprovalStatus || selectedApprovalFilter">
        Try adjusting your filters
      </p>
      <p *ngIf="!searchTerm && !selectedApprovalStatus && !selectedApprovalFilter">
        No driver assignments available
      </p>
    </div>

    <!-- Table -->
    <p-table *ngIf="!loading && filteredAssignments.length > 0" [value]="assignments" [lazy]="true" [paginator]="true"
      [rows]="rows" [first]="first" [totalRecords]="totalRecords" [rowsPerPageOptions]="[10, 20, 50, 100]"
      [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first}–{last} of {totalRecords}"
      styleClass="data-table p-datatable-gridlines" (onLazyLoad)="loadAssignments($event)"
      [tableStyle]="{ 'min-width': '60rem' }" responsiveLayout="scroll">

      <ng-template pTemplate="header">
        <tr>
          <th>Driver</th>
          <th>Contact</th>
          <th>Fleet / Reg</th>
          <th>Status</th>
          <th>Approved</th>
          <th>Active Days</th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-assignment>
        <tr class="table-row" (click)="viewAssignmentDetails(assignment)">

          <!-- Driver -->
          <td>
            <div class="driver-cell">
              <div class="driver-avatar">
                {{ assignment.firstName?.charAt(0) }}{{ assignment.lastName?.charAt(0) }}
              </div>
              <div class="driver-info">
                <span class="driver-name">{{ getFullName(assignment) }}</span>
                <span class="driver-username">{{ assignment.username }}</span>
              </div>
            </div>
          </td>

          <!-- Contact -->
          <td>
            <span class="mono-text">{{ assignment.phoneNumber }}</span>
          </td>

          <!-- Fleet -->
          <td>
            <div class="fleet-cell">
              <span class="fleet-number">{{ assignment.fleetNumber }}</span>
              <span class="reg-number">{{ assignment.registrationNumber }}</span>
            </div>
          </td>

          <!-- Status -->
          <td>
            <span [class]="'status-badge status-' + getApprovalStatusClass(assignment.status)">
              <i [class]="getApprovalStatusIcon(assignment.status)"></i>
              {{ assignment.status }}
            </span>
          </td>

          <!-- Approved boolean -->
          <td>
            <span *ngIf="assignment.approved !== undefined"
              [class]="'status-badge ' + (assignment.approved ? 'status-active' : 'status-inactive')">
              <i [class]="assignment.approved ? 'pi pi-check' : 'pi pi-times'"></i>
              {{ assignment.approved ? 'Yes' : 'No' }}
            </span>
            <span *ngIf="assignment.approved === undefined" class="status-badge status-default">
              <i class="pi pi-minus"></i>
              N/A
            </span>
          </td>

          <!-- Active Days -->
          <td>
            <div class="days-cell">
              <i class="pi pi-calendar"></i>
              <span>{{ assignment.allowedActiveDays }} days</span>
            </div>
          </td>

          <!-- ── Contextual Actions ── -->
          <td (click)="$event.stopPropagation()">
            <div class="action-cell">

              <!-- PENDING → Approve + Reject -->
              <ng-container *ngIf="canApprove(assignment)">
                <button class="action-btn btn-approve" (click)="openApproveRejectDialog(assignment, 'APPROVED', $event)"
                  pTooltip="Approve" tooltipPosition="top">
                  <i class="pi pi-check"></i>
                </button>
              </ng-container>

              <ng-container *ngIf="canReject(assignment)">
                <button class="action-btn btn-reject" (click)="openApproveRejectDialog(assignment, 'REJECTED', $event)"
                  pTooltip="Reject" tooltipPosition="top">
                  <i class="pi pi-times"></i>
                </button>
              </ng-container>

              <!-- ACTIVE → Deactivate -->
              <ng-container *ngIf="canDeactivate(assignment)">
                <button class="action-btn btn-deactivate" (click)="openDeactivateDialog(assignment, $event)"
                  pTooltip="Deactivate" tooltipPosition="top">
                  <i class="pi pi-ban"></i>
                </button>
              </ng-container>

              <!-- REJECTED / DORMANT / INACTIVE → Activate -->
              <ng-container *ngIf="canActivate(assignment)">
                <button class="action-btn btn-activate" (click)="openActivateDialog(assignment, $event)"
                  pTooltip="Activate" tooltipPosition="top">
                  <i class="pi pi-play"></i>
                </button>
              </ng-container>

              <!-- View (always available) -->
              <button class="action-btn btn-view" (click)="viewAssignmentDetails(assignment)" pTooltip="View details"
                tooltipPosition="top">
                <i class="pi pi-eye"></i>
              </button>

            </div>
          </td>

        </tr>
      </ng-template>

    </p-table>
  </div>

</div>


<!-- ═══════════════════════════════════════════════════════════════════
     DETAIL DIALOG
═══════════════════════════════════════════════════════════════════ -->
<p-dialog [(visible)]="displayDetailDialog" [modal]="true" [closable]="true" [dismissableMask]="true"
  [draggable]="false" [resizable]="false" styleClass="custom-dialog" [style]="{ width: '90vw', maxWidth: '880px' }"
  (onHide)="closeDetailDialog()">

  <ng-template pTemplate="header">
    <div class="dialog-header">
      <div class="dialog-header-top">
        <div class="dialog-header-icon">
          <i class="pi pi-user"></i>
        </div>
        <div class="dialog-title-block">
          <h2 class="dialog-title">{{ getFullName(selectedAssignment!) }}</h2>
          <div class="dialog-badges" *ngIf="selectedAssignment">
            <span [class]="'status-badge status-' + getApprovalStatusClass(selectedAssignment.status)">
              <i [class]="getApprovalStatusIcon(selectedAssignment.status)"></i>
              {{ selectedAssignment.status }}
            </span>
            <span *ngIf="selectedAssignment.approved !== undefined"
              [class]="'status-badge ' + (selectedAssignment.approved ? 'status-active' : 'status-inactive')">
              <i [class]="selectedAssignment.approved ? 'pi pi-check' : 'pi pi-times'"></i>
              {{ selectedAssignment.approved ? 'Approved' : 'Not Approved' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <div class="dialog-body" *ngIf="selectedAssignment">

    <!-- Mini stat cards -->
    <div class="dialog-stat-row">
      <div class="dialog-stat">
        <i class="pi pi-calendar"></i>
        <span class="ds-label">Active Days</span>
        <span class="ds-value">{{ selectedAssignment.allowedActiveDays }}</span>
      </div>
      <div class="dialog-stat" *ngIf="selectedAssignment.approvalCount !== undefined">
        <i class="pi pi-thumbs-up"></i>
        <span class="ds-label">Approvals</span>
        <span class="ds-value">{{ selectedAssignment.approvalCount }}</span>
      </div>
      <div class="dialog-stat" *ngIf="selectedAssignment.startDate">
        <i class="pi pi-calendar-plus"></i>
        <span class="ds-label">Start Date</span>
        <span class="ds-value mono">{{ selectedAssignment.startDate | date:'dd MMM' }}</span>
      </div>
      <div class="dialog-stat">
        <i class="pi pi-car"></i>
        <span class="ds-label">Fleet</span>
        <span class="ds-value mono">{{ selectedAssignment.fleetNumber }}</span>
      </div>
    </div>

    <!-- Two-column detail grid -->
    <div class="detail-grid">

      <!-- Left: Driver Info -->
      <div class="detail-column">
        <h3 class="column-title">
          <i class="pi pi-user"></i> Driver Information
        </h3>

        <div class="detail-item">
          <label>Full Name</label>
          <span class="value driver-name-highlight">
            <i class="pi pi-user"></i>
            {{ getFullName(selectedAssignment) }}
          </span>
        </div>
        <div class="detail-item">
          <label>Username</label>
          <span class="value mono">{{ selectedAssignment.username }}</span>
        </div>
        <div class="detail-item">
          <label>Phone Number</label>
          <span class="value contact-value">
            <i class="pi pi-phone"></i>
            {{ selectedAssignment.phoneNumber }}
          </span>
        </div>
        <div class="detail-item">
          <label>First Name</label>
          <span class="value">{{ selectedAssignment.firstName }}</span>
        </div>
        <div class="detail-item">
          <label>Last Name</label>
          <span class="value">{{ selectedAssignment.lastName }}</span>
        </div>
        <div class="detail-item">
          <label>Created On</label>
          <span class="value">{{ selectedAssignment.createdOn | date:'dd MMM yyyy, hh:mm a' }}</span>
        </div>
        <div class="detail-item">
          <label>Created By</label>
          <span class="value">{{ selectedAssignment.createBy }}</span>
        </div>
      </div>

      <!-- Right: Assignment Details -->
      <div class="detail-column">
        <h3 class="column-title">
          <i class="pi pi-car"></i> Assignment Details
        </h3>

        <div class="detail-item">
          <label>Fleet Number</label>
          <span class="value fleet-highlight">
            <i class="pi pi-car"></i>
            {{ selectedAssignment.fleetNumber }}
          </span>
        </div>
        <div class="detail-item">
          <label>Registration Number</label>
          <span class="value code-value">{{ selectedAssignment.registrationNumber }}</span>
        </div>
        <div class="detail-item" *ngIf="selectedAssignment.startDate">
          <label>Start Date</label>
          <span class="value">{{ selectedAssignment.startDate | date:'dd MMM yyyy' }}</span>
        </div>
        <div class="detail-item" *ngIf="selectedAssignment.endDate">
          <label>End Date</label>
          <span class="value">{{ selectedAssignment.endDate | date:'dd MMM yyyy' }}</span>
        </div>
        <div class="detail-item">
          <label>Stage ID</label>
          <span class="value">{{ selectedAssignment.stageId || 'N/A' }}</span>
        </div>
        <div class="detail-item">
          <label>Investor Number</label>
          <span class="value contact-value">
            <i class="pi pi-phone"></i>
            {{ selectedAssignment.investorNumber }}
          </span>
        </div>
        <div class="detail-item">
          <label>Marshal Number</label>
          <span class="value contact-value">
            <i class="pi pi-phone"></i>
            {{ selectedAssignment.marshalNumber }}
          </span>
        </div>
        <div class="detail-item">
          <label>Entity ID</label>
          <span class="value code-value">{{ selectedAssignment.entityId }}</span>
        </div>
        <div class="detail-item">
          <label>Assignment ID</label>
          <span class="value code-value">{{ selectedAssignment.id }}</span>
        </div>
      </div>

    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <button class="footer-btn btn-secondary" (click)="closeDetailDialog()">
        <i class="pi pi-times"></i> Close
      </button>

      <!-- Footer action buttons respect status -->
      <ng-container *ngIf="selectedAssignment">
        <!-- PENDING actions -->
        <ng-container *ngIf="canApprove(selectedAssignment)">
          <button class="footer-btn btn-danger" (click)="openApproveRejectDialog(selectedAssignment, 'REJECTED')">
            <i class="pi pi-times"></i> Reject
          </button>
          <button class="footer-btn btn-success" (click)="openApproveRejectDialog(selectedAssignment, 'APPROVED')">
            <i class="pi pi-check"></i> Approve
          </button>
        </ng-container>

        <!-- ACTIVE actions -->
        <ng-container *ngIf="canDeactivate(selectedAssignment)">
          <button class="footer-btn btn-danger" (click)="openDeactivateDialog(selectedAssignment)">
            <i class="pi pi-ban"></i> Deactivate
          </button>
        </ng-container>

        <!-- REJECTED / DORMANT / INACTIVE actions -->
        <ng-container *ngIf="canActivate(selectedAssignment)">
          <button class="footer-btn btn-success" (click)="openActivateDialog(selectedAssignment)">
            <i class="pi pi-play"></i> Activate
          </button>
        </ng-container>
      </ng-container>
    </div>
  </ng-template>

</p-dialog>


<!-- ═══════════════════════════════════════════════════════════════════
     APPROVE / REJECT CONFIRMATION DIALOG
═══════════════════════════════════════════════════════════════════ -->
<p-dialog [(visible)]="displayApproveRejectDialog" [modal]="true" [draggable]="false" [resizable]="false"
  styleClass="confirm-dialog" [style]="{ width: '460px' }" (onHide)="closeApproveRejectDialog()">

  <ng-template pTemplate="header">
    <div class="dialog-header">
      <div class="dialog-header-icon" [class.icon-success]="pendingAction === 'APPROVED'"
        [class.icon-danger]="pendingAction === 'REJECTED'">
        <i [class]="pendingAction === 'APPROVED' ? 'pi pi-check' : 'pi pi-times'"></i>
      </div>
      <div>
        <h3 class="dialog-title">
          {{ pendingAction === 'APPROVED' ? 'Approve Assignment' : 'Reject Assignment' }}
        </h3>
        <p class="dialog-subtitle">
          {{ pendingAction === 'APPROVED'
          ? 'Grant this driver access to the fleet'
          : 'Deny this driver assignment request' }}
        </p>
      </div>
    </div>
  </ng-template>

  <div class="confirm-body" *ngIf="selectedAssignment">
    <p class="confirm-message">
      Are you sure you want to
      <strong>{{ pendingAction === 'APPROVED' ? 'approve' : 'reject' }}</strong>
      the assignment for <strong>{{ getFullName(selectedAssignment) }}</strong>
      on fleet <strong class="mono">{{ selectedAssignment.fleetNumber }}</strong>?
    </p>

    <div class="confirm-detail-card">
      <div class="confirm-row">
        <span class="confirm-label">Driver</span>
        <span class="confirm-value">{{ getFullName(selectedAssignment) }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Phone</span>
        <span class="confirm-value mono">{{ selectedAssignment.phoneNumber }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Fleet</span>
        <span class="confirm-value mono">{{ selectedAssignment.fleetNumber }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Registration</span>
        <span class="confirm-value mono">{{ selectedAssignment.registrationNumber }}</span>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <button class="footer-btn btn-secondary" (click)="closeApproveRejectDialog()" [disabled]="actionSubmitting">
        <i class="pi pi-times"></i> Cancel
      </button>
      <button [class]="pendingAction === 'APPROVED' ? 'footer-btn btn-success' : 'footer-btn btn-danger'"
        (click)="confirmApproveReject()" [disabled]="actionSubmitting">
        <span *ngIf="!actionSubmitting">
          <i [class]="pendingAction === 'APPROVED' ? 'pi pi-check' : 'pi pi-times'"></i>
          {{ pendingAction === 'APPROVED' ? 'Approve' : 'Reject' }}
        </span>
        <span *ngIf="actionSubmitting">
          <i class="pi pi-spin pi-spinner"></i> Submitting…
        </span>
      </button>
    </div>
  </ng-template>
</p-dialog>


<!-- ═══════════════════════════════════════════════════════════════════
     ACTIVATE CONFIRMATION DIALOG
═══════════════════════════════════════════════════════════════════ -->
<p-dialog [(visible)]="displayActivateDialog" [modal]="true" [draggable]="false" [resizable]="false"
  styleClass="confirm-dialog" [style]="{ width: '460px' }" (onHide)="closeActivateDialog()">

  <ng-template pTemplate="header">
    <div class="dialog-header">
      <div class="dialog-header-icon icon-success">
        <i class="pi pi-play"></i>
      </div>
      <div>
        <h3 class="dialog-title">Confirm Activation</h3>
        <p class="dialog-subtitle">Activate this driver assignment</p>
      </div>
    </div>
  </ng-template>

  <div class="confirm-body" *ngIf="selectedAssignment">
    <p class="confirm-message">
      Are you sure you want to activate the assignment for
      <strong>{{ getFullName(selectedAssignment) }}</strong>
      on fleet <strong class="mono">{{ selectedAssignment.fleetNumber }}</strong>?
    </p>

    <div class="confirm-detail-card">
      <div class="confirm-row">
        <span class="confirm-label">Driver</span>
        <span class="confirm-value">{{ getFullName(selectedAssignment) }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Phone</span>
        <span class="confirm-value mono">{{ selectedAssignment.phoneNumber }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Fleet</span>
        <span class="confirm-value mono">{{ selectedAssignment.fleetNumber }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Registration</span>
        <span class="confirm-value mono">{{ selectedAssignment.registrationNumber }}</span>
      </div>
    </div>

    <div class="confirm-success-note">
      <i class="pi pi-info-circle"></i>
      The driver's status will be set to <strong>ACTIVE</strong>.
      They will be able to operate this fleet.
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <button class="footer-btn btn-secondary" (click)="closeActivateDialog()" [disabled]="actionSubmitting">
        <i class="pi pi-times"></i> Cancel
      </button>
      <button class="footer-btn btn-success" (click)="confirmActivate()" [disabled]="actionSubmitting">
        <span *ngIf="!actionSubmitting">
          <i class="pi pi-play"></i> Activate
        </span>
        <span *ngIf="actionSubmitting">
          <i class="pi pi-spin pi-spinner"></i> Activating…
        </span>
      </button>
    </div>
  </ng-template>
</p-dialog>


<!-- ═══════════════════════════════════════════════════════════════════
     DEACTIVATE CONFIRMATION DIALOG
═══════════════════════════════════════════════════════════════════ -->
<p-dialog [(visible)]="displayDeactivateDialog" [modal]="true" [draggable]="false" [resizable]="false"
  styleClass="confirm-dialog" [style]="{ width: '460px' }" (onHide)="closeDeactivateDialog()">

  <ng-template pTemplate="header">
    <div class="dialog-header">
      <div class="dialog-header-icon icon-warning">
        <i class="pi pi-exclamation-triangle"></i>
      </div>
      <div>
        <h3 class="dialog-title">Confirm Deactivation</h3>
        <p class="dialog-subtitle">This will remove the driver from active duty</p>
      </div>
    </div>
  </ng-template>

  <div class="confirm-body" *ngIf="selectedAssignment">
    <p class="confirm-message">
      Are you sure you want to deactivate the assignment for
      <strong>{{ getFullName(selectedAssignment) }}</strong>
      on fleet <strong class="mono">{{ selectedAssignment.fleetNumber }}</strong>?
    </p>

    <div class="confirm-detail-card">
      <div class="confirm-row">
        <span class="confirm-label">Driver</span>
        <span class="confirm-value">{{ getFullName(selectedAssignment) }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Phone</span>
        <span class="confirm-value mono">{{ selectedAssignment.phoneNumber }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Fleet</span>
        <span class="confirm-value mono">{{ selectedAssignment.fleetNumber }}</span>
      </div>
      <div class="confirm-row">
        <span class="confirm-label">Registration</span>
        <span class="confirm-value mono">{{ selectedAssignment.registrationNumber }}</span>
      </div>
    </div>

    <div class="confirm-warning-note">
      <i class="pi pi-info-circle"></i>
      The driver's status will be set to <strong>INACTIVE</strong>.
      They can be re-assigned at any time.
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <button class="footer-btn btn-secondary" (click)="closeDeactivateDialog()" [disabled]="actionSubmitting">
        <i class="pi pi-times"></i> Cancel
      </button>
      <button class="footer-btn btn-danger" (click)="confirmDeactivate()" [disabled]="actionSubmitting">
        <span *ngIf="!actionSubmitting">
          <i class="pi pi-ban"></i> Deactivate
        </span>
        <span *ngIf="actionSubmitting">
          <i class="pi pi-spin pi-spinner"></i> Deactivating…
        </span>
      </button>
    </div>
  </ng-template>
</p-dialog>